{% extends 'base.html' %}

{% block title %}About Us{% endblock %}

{% block content %}
    <section class="about-hero section-padding">
        <div class="container">
            <h1 style="font-family: var(--font-heading);">About Us</h1>
            <p>关于我们</p>
        </div>
    </section>

    <section class="section-padding">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto;">
                <h2 style="color: var(--primary-color); margin-bottom: 15px;">Who We Are 认识我们</h2>
                <div class="bilingual-text" style="text-align: justify; line-height: 1.8; font-size: 1.05rem; color: #444;">
                    <p style="margin-bottom: 15px;">
                        CCCGJ was originally founded by a group of Chinese immigrant Christians in 2007. While its name includes the word "Chinese," we warmly welcome people of all ethnic backgrounds.<br/>
                        CCCGJ consists of Christians from mainland China, Taiwan, Hong Kong, Malaysia, the United States, and beyond. We offer bilingual ministries in both English and Mandarin.<br/>
                        At CCCGJ, English- and Mandarin-speaking individuals hear the same gospel, grow together in Christ and serve in God’s Kingdom. <br/>
                        During Sunday worship, you may catch a glimpse of the beauty of heavenly worship, where people from different nations praise the one true Lord in two languages — English and Mandarin.
                    </p>             
                    <p style="margin-bottom: 15px; color: #666; font-family: 'Inter', sans-serif;">
                        杰克逊华人基督教会（CCCGJ）最初由一群华人基督徒移民于2007年建立。虽然教会的名字中有“华人”二字，但我们热情欢迎来自各族裔背景的人。<br/>
                        CCCGJ的会众来自中国大陆、台湾、香港、马来西亚、美国，等地。我们提供中英文双语的事工。<br/>
                        在CCCGJ，无论说英语还是普通话的人都可以听到同样的福音，在基督里一同成长，并参与神国度的服侍。<br/>
                        在主日敬拜中，你可以预尝天堂的敬拜——来自不同国家的弟兄姊妹，用两种语言，一同敬拜独一的真神。
                    </p>
                </div>
            </div>

            <!-- Callout Section: Beliefs -->
            <div class="callout-section" style="max-width: 800px; margin: 40px auto 0; background: #f0f7ff; border-left: 5px solid var(--primary-color); padding: 30px; border-radius: 0 8px 8px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                <h3 style="color: var(--primary-color); margin-bottom: 20px; font-size: 1.4rem;">Our Belief 信仰告白</h3>
                
                <div style="line-height: 1.8; color: #333;">
                    <p style="margin-bottom: 20px;">
                        As a Southern Baptist Church, we are affiliated to the doctrines of the Apostles’ Creed, The Nicene Creed, The Athanasian Creed, 1689 Baptist Confession of Faith, New Hampshire Confession of Faith (1833), The Baptist Faith and Message 2000 (Southern Baptist).
                    </p>
                    <p style="margin-bottom: 20px; font-family: 'Inter', sans-serif;">
                        作为一间美南浸信会的教会，我们在信仰上认同《使徒信经》，《尼西亚信经》、《亚他那修信经》、《1689年浸信会信仰告白》、《新罕布什尔信仰告白（1833）》和《浸信会信仰与信息 2000（美南浸信会）》。
                    </p>
                    <a href="#" target="_blank" style="display: inline-block; color: var(--secondary-color); font-weight: 600; text-decoration: none; border-bottom: 2px solid var(--secondary-color); padding-bottom: 2px;">
                        Read Full Confession of Faith (信仰宣言链接) &rarr;
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section class="team-section" style="background-color: #fcfcfc;">
        <div class="container">
            <!-- Elders Team -->
            <h2 class="team-group-title">Elders Team 长老团队</h2>
            <div class="team-grid">
                <!-- Member 1 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Senior Pastor Jason Shi.jpg') }}" alt="Pastor Jason Shi" class="member-photo">
                    <div class="member-name-cn">时尽书牧师</div>
                    <div class="member-name-en">Senior Pastor Jason Shi</div>
                </div>
                <!-- Member 2 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Associate Pastor Nate Carroll.jpg') }}" alt="Pastor Nate Carroll" class="member-photo">
                    <div class="member-name-cn">Associate Pastor</div>
                    <div class="member-name-en">Nate Carroll</div>
                </div>
            </div>
            <!-- Elders Team -->
            <div class="team-grid">
                <!-- Elder 1 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Elder Hwai-ping Cheng.jpg') }}" alt="Elder Hwai-ping Cheng" class="member-photo">
                    <div class="member-name-cn">郑怀平长老</div>
                    <div class="member-name-en">Elder Hwai-ping Cheng</div>
                </div>
                <!-- Elder 2 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Elder Yadong Li.jpg') }}" alt="Elder Yadong Li" class="member-photo">
                    <div class="member-name-cn">李亚东长老</div>
                    <div class="member-name-en">Elder Yadong Li</div>
                </div>
            </div>

            <!-- Deacons Team -->
            <h2 class="team-group-title">Deacons Team 执事团队</h2>
            <div class="team-grid">
                <!-- Deacon 1 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Deacon Lu Ling.jpg') }}" alt="Lu Ling" class="member-photo">
                    <div class="member-name-cn">吕岭</div>
                    <div class="member-name-en">Lu Ling</div>
                </div>
                <!-- Deacon 2 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Deacon Huiqing Zhu.jpg') }}" alt="Huiqing Zhu" class="member-photo">
                    <div class="member-name-cn">朱慧卿</div>
                    <div class="member-name-en">Huiqing Zhu</div>
                </div>
                <!-- Deacon 3 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Deacon Cathy Cao.jpg') }}" alt="Cathy Cao" class="member-photo">
                    <div class="member-name-cn">周曹欣</div>
                    <div class="member-name-en">Cathy Cao</div>
                </div>
                <!-- Deacon 4 -->
                <div class="team-member">
                    <img src="{{ url_for('static', filename='images/Deacon Eric Mu.jpg') }}" alt="Eric Mu" class="member-photo">
                    <div class="member-name-cn">慕敞</div>
                    <div class="member-name-en">Eric Mu</div>
                </div>
            </div>
        </div>
    </section>

    <button id="back-to-top-btn" title="Go to top" aria-label="Back to top"><i class="fa-solid fa-angle-up"></i></button>
{% endblock %}















































































<!-- AI SMART EDIT INJECTION START -->
<script>
window.__AI_SMART_EDIT_FILE__ = "app/templates/pages/about.html";
(function () {
  const NAMESPACE = 'AI_SMART_EDIT';
  
  // State
  let isActive = false;
  let isEditMode = false;
  let overlay = null;
  let selectedOverlay = null;

  // --- Overlay Management ---
  function createOverlay(id, color, zIndex) {
    const el = document.createElement('div');
    el.id = id;
    el.style.cssText = `
      position: absolute;
      border: 2px solid ${color};
      background-color: ${color}33;
      pointer-events: none;
      z-index: ${zIndex};
      display: none;
      transition: all 0.1s ease-out;
    `;
    document.body.appendChild(el);
    return el;
  }

  function ensureOverlays() {
    if (!overlay) overlay = createOverlay('ai-smart-edit-hover', '#0070f3', '2147483646');
    if (!selectedOverlay) selectedOverlay = createOverlay('ai-smart-edit-selected', '#f5a623', '2147483647');
  }

  // --- Utility Functions ---
  function getStableSelector(el) {
    if (el.id) return `#${el.id}`;
    let path = [];
    while (el && el.nodeType === Node.ELEMENT_NODE) {
      let selector = el.nodeName.toLowerCase();
      if (el.className && typeof el.className === 'string') {
        const classes = el.className.trim().split(/\s+/).filter(c => c && !c.startsWith('ai-smart-edit'));
        if (classes.length) selector += `.${classes.join('.')}`;
      }
      let siblingIndex = 1;
      let sibling = el.previousElementSibling;
      while (sibling) {
        if (sibling.nodeName === el.nodeName) siblingIndex++;
        sibling = sibling.previousElementSibling;
      }
      if (siblingIndex > 1) selector += `:nth-of-type(${siblingIndex})`;
      path.unshift(selector);
      el = el.parentNode;
    }
    return path.join(' > ');
  }

  function updateOverlay(overlayEl, targetEl) {
    if (!targetEl) {
      overlayEl.style.display = 'none';
      return;
    }
    const rect = targetEl.getBoundingClientRect();
    const scrollX = window.scrollX || window.pageXOffset;
    const scrollY = window.scrollY || window.pageYOffset;

    overlayEl.style.display = 'block';
    overlayEl.style.left = `${rect.left + scrollX}px`;
    overlayEl.style.top = `${rect.top + scrollY}px`;
    overlayEl.style.width = `${rect.width}px`;
    overlayEl.style.height = `${rect.height}px`;
  }

  function captureContext(el) {
    const rect = el.getBoundingClientRect();
    const computed = window.getComputedStyle(el);
    const parent = el.parentElement;
    
    return {
      tagName: el.tagName.toLowerCase(),
      id: el.id || '',
      className: el.className instanceof String ? el.className.trim() : (el.classList ? Array.from(el.classList).join(' ') : ''),
      rect: { x: rect.left, y: rect.top, width: rect.width, height: rect.height },
      computedStyles: {
        display: computed.display,
        position: computed.position,
        color: computed.color,
        backgroundColor: computed.backgroundColor,
        fontFamily: computed.fontFamily,
        fontSize: computed.fontSize,
        fontWeight: computed.fontWeight,
        lineHeight: computed.lineHeight,
        margin: computed.margin,
        padding: computed.padding,
        border: computed.border,
        borderRadius: computed.borderRadius,
        zIndex: computed.zIndex,
        textAlign: computed.textAlign,
        opacity: computed.opacity,
        visibility: computed.visibility
      },
      innerText: el.innerText ? el.innerText.substring(0, 300).trim() : '',
      html: el.outerHTML || '',
      innerHTML: el.innerHTML ? el.innerHTML.substring(0, 300).trim() : '',
      selector: getStableSelector(el),
      parent: parent ? { tagName: parent.tagName.toLowerCase(), id: parent.id || '' } : null,
      url: window.location.href,
      route: window.location.pathname,
      viewport: { width: window.innerWidth, height: window.innerHeight }
    };
  }

  // --- Selection Mode Handlers ---
  function handleMouseOver(e) {
    if (!isActive || isEditMode) return;
    updateOverlay(overlay, e.target);
  }

  function handleClick(e) {
    if (!isActive || isEditMode) return;
    e.preventDefault();
    e.stopPropagation();

    const target = e.target;
    updateOverlay(selectedOverlay, target);
    
    const context = captureContext(target);
    window.parent.postMessage({
      type: `${NAMESPACE}:SELECTED`,
      payload: context
    }, '*');
  }

  // --- Edit Mode Styles ---
  function injectEditStyles() {
    if (document.getElementById('ai-smart-edit-styles')) return;
    
    const style = document.createElement('style');
    style.id = 'ai-smart-edit-styles';
    style.textContent = `
      .ai-smart-edit-editing [contenteditable="true"] {
        outline: 2px dashed rgba(0, 150, 255, 0.5) !important;
        padding: 4px !important;
        border-radius: 4px !important;
        transition: all 0.2s !important;
      }
      .ai-smart-edit-editing [contenteditable="true"]:hover,
      .ai-smart-edit-editing [contenteditable="true"]:focus {
        outline: 2px solid #0096ff !important;
        background: rgba(0, 150, 255, 0.05) !important;
        box-shadow: 0 0 15px rgba(0, 150, 255, 0.2) !important;
      }
      .ai-smart-edit-editing img {
        cursor: pointer !important;
        transition: all 0.2s !important;
      }
      .ai-smart-edit-editing img:hover {
        outline: 3px solid #f5a623 !important;
        box-shadow: 0 0 15px rgba(245, 166, 35, 0.3) !important;
      }
      .ai-smart-edit-editing a {
        position: relative !important;
      }
      .ai-smart-edit-editing a::after {
        content: '✎';
        position: absolute;
        top: -8px;
        right: -8px;
        background: #333;
        color: white;
        font-size: 10px;
        padding: 2px 4px;
        border-radius: 3px;
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
      }
      .ai-smart-edit-editing a:hover::after {
        opacity: 1;
      }
    `;
    document.head.appendChild(style);
  }

  // --- Edit Mode Functions ---
  function enableEditMode() {
    isEditMode = true;
    injectEditStyles();
    document.body.classList.add('ai-smart-edit-editing');
    
    // Make text elements editable
    const textSelectors = 'h1, h2, h3, h4, h5, h6, p, span, li, td, th, label, blockquote, figcaption';
    document.querySelectorAll(textSelectors).forEach(el => {
      if (el.closest('#ai-smart-edit-hover, #ai-smart-edit-selected')) return;
      el.contentEditable = 'true';
    });

    // Divs with direct text content
    document.querySelectorAll('div').forEach(el => {
      if (el.closest('#ai-smart-edit-hover, #ai-smart-edit-selected')) return;
      for (let node of el.childNodes) {
        if (node.nodeType === 3 && node.textContent.trim().length > 0) {
          el.contentEditable = 'true';
          break;
        }
      }
    });

    // Add image click handlers
    document.querySelectorAll('img').forEach(img => {
      img.addEventListener('click', handleImageClick, true);
    });

    // Add link click handlers
    document.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', handleLinkClick, true);
    });
  }

  function disableEditMode() {
    isEditMode = false;
    document.body.classList.remove('ai-smart-edit-editing');
    
    // Remove contentEditable
    document.querySelectorAll('[contenteditable="true"]').forEach(el => {
      el.contentEditable = 'false';
    });

    // Remove image handlers
    document.querySelectorAll('img').forEach(img => {
      img.removeEventListener('click', handleImageClick, true);
    });

    // Remove link handlers
    document.querySelectorAll('a').forEach(link => {
      link.removeEventListener('click', handleLinkClick, true);
    });
  }

  function handleImageClick(e) {
    if (!isEditMode) return;
    e.preventDefault();
    e.stopPropagation();
    
    const img = e.target;
    const context = {
      selector: getStableSelector(img),
      src: img.src,
      alt: img.alt || '',
      width: img.naturalWidth,
      height: img.naturalHeight
    };
    
    window.parent.postMessage({
      type: `${NAMESPACE}:IMAGE_CLICK`,
      payload: context
    }, '*');
  }

  function handleLinkClick(e) {
    if (!isEditMode) return;
    e.preventDefault();
    e.stopPropagation();
    
    const link = e.currentTarget;
    const context = {
      selector: getStableSelector(link),
      href: link.getAttribute('href') || '',
      text: link.innerText || '',
      hasChildren: link.children.length > 0
    };
    
    window.parent.postMessage({
      type: `${NAMESPACE}:LINK_CLICK`,
      payload: context
    }, '*');
  }

  function updateImage(selector, src) {
    try {
      const img = document.querySelector(selector);
      if (img && img.tagName === 'IMG') {
        img.src = src;
      }
    } catch (err) {
      console.error('[AI Smart Edit] Failed to update image:', err);
    }
  }

  function updateLink(selector, href, text) {
    try {
      const link = document.querySelector(selector);
      if (link && link.tagName === 'A') {
        link.href = href;
        // Only update text if it's a simple text link (no child elements)
        if (text !== undefined && link.children.length === 0) {
          link.innerText = text;
        }
      }
    } catch (err) {
      console.error('[AI Smart Edit] Failed to update link:', err);
    }
  }

  function savePage() {
    // Clone the document
    const clone = document.documentElement.cloneNode(true);
    
    // Remove our overlays and styles
    const toRemove = clone.querySelectorAll('#ai-smart-edit-hover, #ai-smart-edit-selected, #ai-smart-edit-styles');
    toRemove.forEach(el => el.remove());
    
    // Remove AI Smart Edit script
    clone.querySelectorAll('script').forEach(s => {
      if (s.src && s.src.includes('ai-smart-edit.js')) s.remove();
    });
    
    // Clean up contentEditable and editing class
    clone.querySelectorAll('[contenteditable]').forEach(el => {
      el.removeAttribute('contenteditable');
    });
    const body = clone.querySelector('body');
    if (body) body.classList.remove('ai-smart-edit-editing');
    
    // Clean up empty style/class attributes
    clone.querySelectorAll('*').forEach(el => {
      if (el.hasAttribute('style') && el.getAttribute('style').trim() === '') {
        el.removeAttribute('style');
      }
      if (el.classList && el.classList.length === 0 && el.hasAttribute('class')) {
        el.removeAttribute('class');
      }
    });
    
    const htmlContent = '<!DOCTYPE html>\n' + clone.outerHTML;
    
    window.parent.postMessage({
      type: `${NAMESPACE}:PAGE_CONTENT`,
      payload: {
        html: htmlContent,
        route: window.location.pathname,
        filePath: window.__AI_SMART_EDIT_FILE__ || null
      }
    }, '*');
  }

  // --- Message Handler ---
  function handleGenericMessage(e) {
    if (!e.data || !e.data.type) return;

    switch (e.data.type) {
      case `${NAMESPACE}:PING`:
        window.parent.postMessage({ type: `${NAMESPACE}:PONG` }, '*');
        break;
        
      case `${NAMESPACE}:ENABLE`:
        isActive = true;
        ensureOverlays();
        document.body.style.cursor = 'crosshair';
        document.addEventListener('mouseover', handleMouseOver, true);
        document.addEventListener('click', handleClick, true);
        break;
        
      case `${NAMESPACE}:DISABLE`:
        isActive = false;
        if (isEditMode) disableEditMode();
        if (overlay) overlay.style.display = 'none';
        if (selectedOverlay) selectedOverlay.style.display = 'none';
        document.body.style.cursor = '';
        document.removeEventListener('mouseover', handleMouseOver, true);
        document.removeEventListener('click', handleClick, true);
        break;
        
      case `${NAMESPACE}:EDIT_MODE_ENABLE`:
        enableEditMode();
        break;
        
      case `${NAMESPACE}:EDIT_MODE_DISABLE`:
        disableEditMode();
        break;
        
      case `${NAMESPACE}:UPDATE_IMAGE`:
        if (e.data.payload) {
          updateImage(e.data.payload.selector, e.data.payload.src);
        }
        break;
        
      case `${NAMESPACE}:UPDATE_LINK`:
        if (e.data.payload) {
          updateLink(e.data.payload.selector, e.data.payload.href, e.data.payload.text);
        }
        break;
        
      case `${NAMESPACE}:SAVE_PAGE`:
        savePage();
        break;
    }
  }

  // --- Initialize ---
  window.addEventListener('message', handleGenericMessage);

  // Handle Scroll to detect bottom
  let scrollTimeout;
  const onScroll = () => {
    if (!isActive) return;
    
    if (scrollTimeout) cancelAnimationFrame(scrollTimeout);
    
    scrollTimeout = requestAnimationFrame(() => {
      const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
      const scrollTop = window.scrollY || window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      const clientHeight = window.innerHeight || document.documentElement.clientHeight;
      
      const isBottom = (scrollTop + clientHeight) >= (scrollHeight - 100);
      
      window.parent.postMessage({
        type: `${NAMESPACE}:SCROLL_UPDATE`,
        payload: { isBottom }
      }, '*');
    });
  };
  
  window.addEventListener('scroll', onScroll, { passive: true });
  window.addEventListener('resize', onScroll, { passive: true });

  // Handle ESC key to exit
  document.addEventListener('keydown', (e) => {
    if (isActive && e.key === 'Escape') {
      isActive = false;
      if (isEditMode) disableEditMode();
      document.body.style.cursor = '';
      if (overlay) overlay.style.display = 'none';
      if (selectedOverlay) selectedOverlay.style.display = 'none';
      window.parent.postMessage({ type: `${NAMESPACE}:DISABLE` }, '*');
    }
  });

  console.log('[AI Smart Edit] Target script loaded with edit mode support.');
})();

</script>
<!-- AI SMART EDIT INJECTION END -->
